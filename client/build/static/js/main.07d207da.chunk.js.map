{"version":3,"sources":["grid.js","socket.js","pantalla-inicio.js","pantalla-espera.js","pantalla-resultados.js","pantalla-pregunta.js","pantalla-respuesta.js","index.js"],"names":["Timer","time","style","background","position","top","right","width","height","Grid","columnas","children","display","gridTemplateColumns","gridGap","socket","io","Inicio","personas","conectados","setId","setEstado","movil","useMediaQuery","query","portrait","useEffect","once","e","map","elem","disponible","includes","onClick","emit","aspectRatio","textDecoration","Espera","isHost","useState","pool","setPool","tipos","setTipos","fetch","then","response","json","data","on","desconectar","off","onChange","event","target","value","Resultados","resultados","sort","a","b","votos","max","unidad","window","innerWidth","quedanPreguntas","setQuedanPreguntas","length","console","log","flexDirection","idx","textAlign","margin","nombre","borderRadius","Pregunta","pregunta","padding","backgroundImage","fontSize","Respuesta","respuesta","setRespuesta","f","backgroundColor","App","setPersonas","Host","id","setPregunta","setResultados","estado","setConectados","setTime","onbeforeunload","disconnect","c","t","p","res","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.07d207da.chunk.js","sourcesContent":["import { React, useEffect, useState } from 'react';\r\n\r\n\r\nexport const mapObject = (obj, f) => {\r\n    Object.keys(obj).map(f);\r\n}\r\n\r\nexport const useSized = () => {\r\n    const [size, setSize] = useState({ width: window.innerWidth, height: window.innerHeight });\r\n\r\n    useEffect(() => {\r\n        const onResize = () => {\r\n            setSize({ width: window.innerWidth, height: window.innerHeight });\r\n        }\r\n\r\n        window.addEventListener('resize', onResize);\r\n\r\n        return () => window.removeEventListener('resize', onResize);\r\n    })\r\n\r\n    return size;\r\n}\r\n\r\nexport const Timer = ({ time }) => {\r\n    return (\r\n        <div style={{ background: \"#fdf7e3\", position: \"sticky\", top: \"0\", right: \"0\", width: \"10%\", height: \"10%\" }}>\r\n            {\r\n                time\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Grid = ({ columnas, children }) => {\r\n\r\n    return (\r\n        <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(\" + columnas + \", 1fr)\", gridGap: \"20px\" }}>\r\n            {\r\n                children\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Row = ({ children }) => {\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\", justifyItems: \"center\" }}>\r\n            {\r\n                children\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Column = ({ children }) => {\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyItems: \"center\" }}>\r\n            {\r\n                children\r\n            }\r\n        </div>\r\n    )\r\n}","import io from \"socket.io-client\";\r\n\r\nexport const socket = io();","import { React, useEffect } from 'react';\r\nimport { Grid } from \"./grid\"\r\nimport { useMediaQuery } from 'react-responsive';\r\nimport { socket } from './socket';\r\n\r\nexport const Inicio = ({ personas, conectados, setId, setEstado }) => {\r\n    const movil = useMediaQuery({ query: \"(max-width: 1224px)\" });\r\n    const portrait = useMediaQuery({ query: \"(orientation: portrait)\" });\r\n\r\n    useEffect(() => {\r\n        socket.once(\"conexion aceptada\", (e) => {\r\n            setId(e); setEstado(\"esperando\");\r\n        })\r\n    })\r\n\r\n    return (\r\n        <Grid columnas={movil && portrait ? 2 : 5}>\r\n            {\r\n                personas.map((elem) => {\r\n                    const disponible = !conectados.includes(elem);\r\n\r\n                    return (\r\n                        <button key={elem}\r\n                            onClick={() => { if (disponible) { socket.emit(\"conectar\", elem); } }}\r\n                            style={{ aspectRatio: \"1/1\", textDecoration: disponible ? \"none\" : \"line-through\" }}>\r\n                            {elem}\r\n                        </button>\r\n                    )\r\n                })\r\n            }\r\n        </Grid>\r\n    )\r\n}","import { React, useState, useEffect } from 'react';\r\nimport { Grid, } from './grid';\r\nimport { socket } from './socket';\r\nimport { useMediaQuery } from 'react-responsive';\r\n\r\nexport const Espera = ({ isHost, conectados, setId, setEstado }) => {\r\n\r\n    const [pool, setPool] = useState(\"normales\");\r\n    let [tipos, setTipos] = useState([])\r\n\r\n\r\n    const movil = useMediaQuery({ query: \"(max-width: 1224px)\" });\r\n    const portrait = useMediaQuery({ query: \"(orientation: portrait)\" });\r\n\r\n    useEffect(() => {\r\n        fetch(\"/pools\").then(response => response.json()).then(data => setTipos(data))\r\n\r\n        socket.on(\"set pool\", setPool)\r\n\r\n        const desconectar = () => {\r\n            setId(\"\");\r\n            setEstado(\"eligiendo\");\r\n        }\r\n        socket.on(\"desconectado\", desconectar)\r\n\r\n        return () => { socket.off(\"set pool\", setPool); socket.off(\"desconectado\", desconectar) }\r\n    }, [setId, setEstado])\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Grid columnas={movil && portrait ? 2 : 5}>\r\n                {\r\n                    conectados.map((elem) => {\r\n                        return (\r\n                            <button key={elem}\r\n                                style={{ aspectRatio: \"1/1\" }}>\r\n                                {elem}\r\n                            </button>\r\n                        )\r\n                    })\r\n                }\r\n            </Grid>\r\n            <p>\r\n                <button onClick={() => { socket.emit(\"desconectar\"); }}>Cancelar</button>\r\n                {isHost &&\r\n                    <div>\r\n                        <button onClick={() => { socket.emit(\"set pool\", pool); socket.emit(\"start round\") }}>\r\n                            Empezar\r\n                        </button>\r\n                        <select onChange={(event) => { setPool(event.target.value) }}>\r\n                            {\r\n                                tipos.map((elem) => {\r\n                                    return (<option key={elem}>{elem}</option>)\r\n                                })\r\n                            }\r\n                        </select>\r\n                    </div>\r\n                }\r\n            </p>\r\n        </div>\r\n\r\n    )\r\n}","import { React, useState, useEffect } from 'react';\r\nimport { socket } from './socket';\r\n\r\nexport const Resultados = ({ resultados, isHost }) => {\r\n\tresultados.sort((a, b) => b.votos - a.votos);\r\n\r\n\tconst max = resultados[0].votos;\r\n\tconst unidad = window.innerWidth / (max + 2);\r\n\r\n\tconst [quedanPreguntas, setQuedanPreguntas] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tfetch(\"/preguntas\").then(response => response.json()).then(data => {\r\n\t\t\tsetQuedanPreguntas(data.length > 0)\r\n\t\t\tconsole.log(data)\r\n\t\t})\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n\t\t\t\t{\r\n\t\t\t\t\tresultados.map((elem, idx) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div key={elem.nombre} style={{ textAlign: \"center\", display: \"flex\", flexDirection: \"row\", width: \"100%\", margin: \"1em\" }}>\r\n\t\t\t\t\t\t\t\t<p style={{ width: unidad }}>{elem.nombre + (idx === 0 ? \"🥇\" : idx === 1 ? \"🥈\" : idx === 2 ? \"🥉\" : \"\")}</p>\r\n\t\t\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\t\t\twidth: unidad * max\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<div style={{ width: unidad * elem.votos, height: \"100%\", background: \"#07820b\", borderRadius: \"25px\" }}></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<p style={{ width: unidad }}>{elem.votos}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t{isHost && quedanPreguntas && <button onClick={() => socket.emit(\"start round\")}>Siguiente</button>}\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react';\r\nimport { Timer } from './grid';\r\n\r\nexport const Pregunta = ({ pregunta, time }) => {\r\n    return (\r\n        <div >\r\n            <Timer time={time}></Timer>\r\n\r\n            <p style={{ borderRadius: \"25px\", top: \"40%\", padding: \"2em\", textAlign: \"center\", backgroundImage: \"url(./bush.png)\", fontSize: \"larger\" }}>\r\n                <h1>Pregunta:</h1>\r\n                <h2> {pregunta} </h2>\r\n            </p>\r\n        </div>\r\n    )\r\n}","import { React, useState, useEffect } from 'react';\r\nimport { useMediaQuery } from 'react-responsive';\r\nimport { Timer, Grid } from './grid';\r\nimport { socket } from './socket';\r\n\r\nexport const Respuesta = ({ time, conectados, setEstado }) => {\r\n    const [respuesta, setRespuesta] = useState(\"\");\r\n\r\n    const movil = useMediaQuery({ query: \"(max-width: 1224px)\" });\r\n    const portrait = useMediaQuery({ query: \"(orientation: portrait)\" });\r\n\r\n    useEffect(() => {\r\n        const f = () => {\r\n            socket.emit(\"respuesta\", respuesta);\r\n            setEstado(\"resultado\")\r\n        }\r\n        socket.once(\"pedir respuestas\", f)\r\n\r\n        return () => socket.off(\"pedir respuestas\", f)\r\n    })\r\n\r\n    return (\r\n        <div>\r\n            <Timer time={time}></Timer>\r\n\r\n            <h1>Introduce la respuesta</h1>\r\n\r\n            <Grid columnas={movil && portrait ? 2 : 5}>\r\n                {\r\n                    conectados.map((elem) => {\r\n                        return (\r\n                            <button key={elem}\r\n                                style={{ aspectRatio: \"1/1\", backgroundColor: elem === respuesta ? 'green' : 'rgb(239, 239, 239)' }}\r\n                                onClick={() => setRespuesta(elem)}>\r\n                                {elem}\r\n                            </button>\r\n                        )\r\n                    })\r\n                }\r\n            </Grid>\r\n        </div>\r\n    )\r\n}","import { React, useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Inicio } from \"./pantalla-inicio\"\nimport { Espera } from \"./pantalla-espera\"\nimport { Resultados } from \"./pantalla-resultados\"\nimport { Pregunta } from './pantalla-pregunta';\nimport { Respuesta } from './pantalla-respuesta';\nimport { socket } from './socket';\n\n\nconst App = () => {\n  const [personas, setPersonas] = useState([]);\n  const Host = \"Carlos\"\n\n  const [id, setId] = useState(\"\");\n  const [pregunta, setPregunta] = useState(\"\");\n  const [resultados, setResultados] = useState([]);\n  const [estado, setEstado] = useState(\"eligiendo\");\n  const [conectados, setConectados] = useState([]);\n\n  const [time, setTime] = useState(5)\n\n  useEffect(() => {\n\n    fetch(\"/usuarios\").then(response => response.json()).then(data => setPersonas(data))\n\n    window.onbeforeunload = () => {\n      socket.disconnect()\n    }\n\n    socket.on(\"set conectados\", (c) => {\n      setConectados(c)\n    })\n\n    socket.on(\"time left\", (t) => {\n      setTime(t)\n    })\n    socket.on(\"timer done\", () => {\n      setEstado(\"respuesta\")\n    })\n\n\n    socket.on(\"set pregunta\", (p) => {\n      setPregunta(p)\n      setEstado(\"pregunta\")\n    })\n    socket.on(\"set resultados\", (res) => {\n      setResultados(res)\n    })\n  });\n\n  if (estado === \"eligiendo\") return (<Inicio personas={personas} conectados={conectados} setId={setId} setEstado={setEstado}></Inicio>)\n  if (estado === \"esperando\") return (<Espera conectados={conectados} isHost={id === Host} setId={setId} setEstado={setEstado}></Espera>)\n  if (estado === \"pregunta\") return (<Pregunta pregunta={pregunta} time={time}></Pregunta>)\n  if (estado === \"respuesta\") return (<Respuesta time={time} conectados={personas} setEstado={setEstado}></Respuesta>)\n  if (estado === \"resultado\") return (<Resultados resultados={resultados} isHost={id === Host}></Resultados>)\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}